import{c as t}from"./apexcharts-df911327.js";import{a as i}from"./leaflet-a06a9ba7.js";import{r as a}from"./mapbox-gl-514c4c42.js";var n,o;n=i,o=a(),n.MapboxGL=n.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(t){n.setOptions(this,t),t.accessToken&&(o.accessToken=t.accessToken),this._throttledUpdate=n.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(t){this._container||this._initContainer();var i=this.getPaneName();t.getPane(i).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),t.options.zoomAnimation&&n.DomEvent.on(t._proxy,n.DomUtil.TRANSITION_END,this._transitionEnd,this),t._addZoomLimit(this)},onRemove:function(t){this._map._proxy&&this._map.options.zoomAnimation&&n.DomEvent.off(this._map._proxy,n.DomUtil.TRANSITION_END,this._transitionEnd,this);var i=this.getPaneName();t.getPane(i).removeChild(this._container)},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMapboxMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var t=this.getSize().multiplyBy(.5),i=this._map.latLngToContainerPoint(this._map.getCenter());return n.latLngBounds(this._map.containerPointToLatLng(i.subtract(t)),this._map.containerPointToLatLng(i.add(t)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_initContainer:function(){var t=this._container=n.DomUtil.create("div","leaflet-gl-layer"),i=this.getSize(),a=this._map.getSize().multiplyBy(this.options.padding);t.style.width=i.x+"px",t.style.height=i.y+"px";var o=this._map.containerPointToLayerPoint([0,0]).subtract(a);n.DomUtil.setPosition(t,o)},_initGL:function(){var t=this._map.getCenter(),i=n.extend({},this.options,{container:this._container,center:[t.lng,t.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap?(this._glMap.setCenter(i.center),this._glMap.setZoom(i.zoom)):this._glMap=new o.Map(i),this._glMap.transform.latRange=null,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var a=this._glMap._actualCanvas;n.DomUtil.addClass(a,"leaflet-image-layer"),n.DomUtil.addClass(a,"leaflet-zoom-animated"),this.options.interactive&&n.DomUtil.addClass(a,"leaflet-interactive"),this.options.className&&n.DomUtil.addClass(a,this.options.className)},_update:function(t){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var i=this.getSize(),a=this._container,o=this._glMap,e=this._map.getSize().multiplyBy(this.options.padding),s=this._map.containerPointToLayerPoint([0,0]).subtract(e);n.DomUtil.setPosition(a,s),this._transformGL(o);var r=Math.round(i.x),h=Math.round(i.y);Math.round(o.transform.width)!==r||Math.round(o.transform.height)!==h?(a.style.width=r+"px",a.style.height=h+"px",null!==o._resize&&void 0!==o._resize?o._resize():o.resize()):null!==o._update&&void 0!==o._update?o._update():o.update()}},_transformGL:function(t){var i=this._map.getCenter(),a=t.transform;a.center=o.LngLat.convert([i.lng,i.lat]),a.zoom=this._map.getZoom()-1},_pinchZoom:function(t){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map.getSize().multiplyBy(this.options.padding*i),o=this.getSize()._divideBy(2),e=this._map.project(t.center,t.zoom)._subtract(o)._add(this._map._getMapPanePos().add(a))._round(),s=this._map.project(this._map.getBounds().getNorthWest(),t.zoom)._subtract(e);n.DomUtil.setTransform(this._glMap._actualCanvas,s.subtract(this._offset),i)},_zoomStart:function(t){this._zooming=!0},_zoomEnd:function(){var t=this._map.getZoomScale(this._map.getZoom());n.DomUtil.setTransform(this._glMap._actualCanvas,null,t),this._zooming=!1,this._update()},_transitionEnd:function(t){n.Util.requestAnimFrame((function(){var t=this._map.getZoom(),i=this._map.getCenter(),a=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());n.DomUtil.setTransform(this._glMap._actualCanvas,a,1),this._glMap.once("moveend",n.Util.bind((function(){this._zoomEnd()}),this)),this._glMap.jumpTo({center:i,zoom:t-1})}),this)},_resize:function(t){this._transitionEnd(t)}}),n.mapboxGL=function(t){return new n.MapboxGL(t)};
